{
    "version": "https://jsonfeed.org/version/1",
    "title": "Starlike",
    "subtitle": "",
    "icon": "https://www.xuwanxing.space/images/favicon.ico",
    "description": "Take some notes.",
    "home_page_url": "https://www.xuwanxing.space",
    "items": [
        {
            "id": "https://www.xuwanxing.space/server/maintenance/NIS/",
            "url": "https://www.xuwanxing.space/server/maintenance/NIS/",
            "title": "NIS",
            "date_published": "2022-10-14T16:00:00.000Z",
            "content_html": "<h2 id=\"rename-folder\"><a class=\"anchor\" href=\"#rename-folder\">#</a> Rename folder</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">umount</span> /oldfolder</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">mv</span> /oldfolder/ /newfolder</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">mount</span> /dev<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>   /newfolder</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ <span class=\"token function\">vim</span> /etc/fstab</pre></td></tr></table></figure><h2 id=\"configuration\"><a class=\"anchor\" href=\"#configuration\">#</a> Configuration</h2>\n<ol>\n<li>Install</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ yum <span class=\"token function\">install</span> ypbind yp-tools</pre></td></tr></table></figure><ol start=\"2\">\n<li>Modify</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">vim</span> /etc/sysconfig/network</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># add</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">NISDOMAIN</span><span class=\"token operator\">=</span>nisdomain</pre></td></tr></table></figure><ol start=\"3\">\n<li>Modify2</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">vim</span> /etc/nsswitch.conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># edit</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>passwd:     nis files sss</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>shadow:     nis files sss</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>group:      nis files sss</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>hosts:      nis files dns myhostname</pre></td></tr></table></figure><ol start=\"4\">\n<li>Modify3</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">vim</span> /etc/yp.conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># add</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>domain nisdomain server master-node</pre></td></tr></table></figure><ol start=\"5\">\n<li>Modify4</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">vim</span> /etc/sysconfig/authconfig</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># edit</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">USENIS</span><span class=\"token operator\">=</span>yes</pre></td></tr></table></figure><ol start=\"6\">\n<li>Modify5</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">vim</span> /etc/pam.d/system-auth</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># add</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>session     optional      pam_mkhomedir.so <span class=\"token assign-left variable\">skel</span><span class=\"token operator\">=</span>/etc/skel <span class=\"token assign-left variable\">umask</span><span class=\"token operator\">=</span>077</pre></td></tr></table></figure><ol start=\"7\">\n<li>Final</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl start rpcbind</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ systemctl start ypbind</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ systemctl <span class=\"token builtin class-name\">enable</span> rpcbind</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ systemctl <span class=\"token builtin class-name\">enable</span> ypbind</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZmVlLmltLzIwMTkvMDMvaW5zdGFsbC1uaXMtb24tY2VudG9zNy8=\">Reference</span></p>\n",
            "tags": [
                "Server",
                "Maintenance",
                "Linux",
                "NIS"
            ]
        },
        {
            "id": "https://www.xuwanxing.space/server/maintenance/Samba/",
            "url": "https://www.xuwanxing.space/server/maintenance/Samba/",
            "title": "Samba",
            "date_published": "2022-10-14T16:00:00.000Z",
            "content_html": "<h2 id=\"add-new-user\"><a class=\"anchor\" href=\"#add-new-user\">#</a> Add new user</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ smbpasswd <span class=\"token parameter variable\">-a</span> username</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xzc3lnMjAxMS9hcnRpY2xlL2RldGFpbHMvMTA2OTM1NDk0\">Reference1</span></p>\n<h2 id=\"backup\"><a class=\"anchor\" href=\"#backup\">#</a> Backup</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-av</span> /etc/samba/ /etc/samba.old/</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-qa</span> <span class=\"token operator\">|</span><span class=\"token function\">grep</span> samba</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">rpm</span> <span class=\"token parameter variable\">-e</span> <span class=\"token punctuation\">(</span>--nodeps<span class=\"token punctuation\">)</span> package <span class=\"token comment\"># don't verify package dependencies (optional)</span></pre></td></tr></table></figure><h2 id=\"recycle-function\"><a class=\"anchor\" href=\"#recycle-function\">#</a> Recycle function</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NtenN0ZXZlbi9hcnRpY2xlL2RldGFpbHMvNDkwNDkzNzM=\">Reference2</span></p>\n",
            "tags": [
                "Server",
                "Maintenance",
                "Linux",
                "Samba"
            ]
        },
        {
            "id": "https://www.xuwanxing.space/server/maintenance/User/",
            "url": "https://www.xuwanxing.space/server/maintenance/User/",
            "title": "User and group",
            "date_published": "2022-10-14T16:00:00.000Z",
            "content_html": "<h2 id=\"create\"><a class=\"anchor\" href=\"#create\">#</a> Create</h2>\n<p># on master node</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">useradd</span> <span class=\"token parameter variable\">-m</span> <span class=\"token parameter variable\">-d</span> /public/user <span class=\"token parameter variable\">-g</span> group user</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">passwd</span> user</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># ssh authorized key</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ <span class=\"token function\">su</span> - user</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$ ssh-keygen</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>$ <span class=\"token builtin class-name\">cd</span> ~/.ssh</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>$ <span class=\"token function\">cp</span> id_rsa.pub authorized_keys</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>$ <span class=\"token function\">chmod</span> <span class=\"token number\">700</span> authorized_keys</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># sync</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>$ <span class=\"token builtin class-name\">cd</span> /var/yp</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>$ <span class=\"token function\">make</span></pre></td></tr></table></figure><h2 id=\"delete\"><a class=\"anchor\" href=\"#delete\">#</a> Delete</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">userdel</span> <span class=\"token parameter variable\">-r</span> user</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># from group</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ gpasswd <span class=\"token parameter variable\">-d</span> user group</pre></td></tr></table></figure><h2 id=\"modify\"><a class=\"anchor\" href=\"#modify\">#</a> Modify</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># add to group</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">usermod</span> <span class=\"token parameter variable\">-a</span> <span class=\"token parameter variable\">-G</span> group user</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># set uid and gid</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ <span class=\"token function\">usermod</span> <span class=\"token parameter variable\">-u</span> <span class=\"token number\">1111</span> testuser   </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$ <span class=\"token function\">groupmod</span> <span class=\"token parameter variable\">-g</span> <span class=\"token number\">1112</span> testgroup</pre></td></tr></table></figure>",
            "tags": [
                "Server",
                "Maintenance",
                "Linux"
            ]
        },
        {
            "id": "https://www.xuwanxing.space/project/software/vcftools/",
            "url": "https://www.xuwanxing.space/project/software/vcftools/",
            "title": "vcftools",
            "date_published": "2022-10-14T16:00:00.000Z",
            "content_html": "<h2 id=\"useful-commands\"><a class=\"anchor\" href=\"#useful-commands\">#</a> Useful commands</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ vcftools <span class=\"token parameter variable\">--gzvcf</span> input.vcf.gz <span class=\"token parameter variable\">--keep</span> id.txt <span class=\"token parameter variable\">--recode</span> <span class=\"token parameter variable\">--stdout</span> <span class=\"token operator\">|</span> <span class=\"token function\">gzip</span> <span class=\"token parameter variable\">-c</span> <span class=\"token operator\">></span> out.vcf.gz</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ vcftools <span class=\"token parameter variable\">--gzvcf</span> input.vcf.gz <span class=\"token parameter variable\">--positions</span> SNP_list.txt <span class=\"token parameter variable\">--out</span> nucleotide_diversity</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ vcftools <span class=\"token parameter variable\">--gzvcf</span> input.vcf.gz <span class=\"token parameter variable\">--chr</span> <span class=\"token number\">1</span> --from-bp a --to-bp b <span class=\"token parameter variable\">--recode</span> --recode-INFO-all <span class=\"token parameter variable\">--out</span> chr1_analysis</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ vcftools <span class=\"token parameter variable\">--gzvcf</span> input.vcf.gz <span class=\"token parameter variable\">--freq</span> <span class=\"token parameter variable\">--out</span> freq_analysis</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ vcf-compare first.vcf.gz second.vcf.gz</pre></td></tr></table></figure><hr />\n<h2 id=\"issues\"><a class=\"anchor\" href=\"#issues\">#</a> Issues</h2>\n<p>⚠️ <strong>Error</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token string\">\"Can't locate Vcf.pm in @INC\"</span> when using perl-vcf modules</pre></td></tr></table></figure><p>🔧 <strong>Solution</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">PERL5LIB</span><span class=\"token operator\">=</span>/path to vcftools/share/perl5</pre></td></tr></table></figure>",
            "tags": [
                "Project",
                "Software",
                "vcftools"
            ]
        },
        {
            "id": "https://www.xuwanxing.space/project/software/bedtools/",
            "url": "https://www.xuwanxing.space/project/software/bedtools/",
            "title": "bedtools",
            "date_published": "2022-10-14T16:00:00.000Z",
            "content_html": "<h2 id=\"compare\"><a class=\"anchor\" href=\"#compare\">#</a> Compare</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ bedtools intersect <span class=\"token parameter variable\">-a</span> f1.bed <span class=\"token parameter variable\">-b</span> f2.bed <span class=\"token parameter variable\">-wa</span> <span class=\"token parameter variable\">-wb</span> <span class=\"token operator\">|</span> bedtools groupby <span class=\"token parameter variable\">-i</span> - <span class=\"token parameter variable\">-g</span> <span class=\"token number\">1</span>-3 <span class=\"token parameter variable\">-c</span> <span class=\"token number\">7</span> <span class=\"token parameter variable\">-o</span> collapse <span class=\"token operator\">></span> final.bed</pre></td></tr></table></figure>",
            "tags": [
                "Project",
                "Software",
                "bedtools"
            ]
        },
        {
            "id": "https://www.xuwanxing.space/server/maintenance/Slurm/",
            "url": "https://www.xuwanxing.space/server/maintenance/Slurm/",
            "title": "Slurm",
            "date_published": "2022-10-14T16:00:00.000Z",
            "content_html": "<div class=\"note info\">\n<p>Continue updating.</p>\n</div>\n<h2 id=\"fix-drain-status\"><a class=\"anchor\" href=\"#fix-drain-status\">#</a> Fix &quot;drain&quot; status</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>scontrol update <span class=\"token assign-left variable\">nodename</span><span class=\"token operator\">=</span>nodeXX <span class=\"token assign-left variable\">state</span><span class=\"token operator\">=</span>resume</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTcxNDQ2MDIvcmVzdGFydC1ub2Rlcy1pbi1zdGF0ZS1kb3du\">Reference1</span></p>\n<h2 id=\"restart\"><a class=\"anchor\" href=\"#restart\">#</a> Restart</h2>\n<p># on master node</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl restart slurmctld.service</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ systemctl restart slurmdbd.service</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ systemctl restart slurmd.service</pre></td></tr></table></figure><p># on slave node</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl restart slurmd.service</pre></td></tr></table></figure><h2 id=\"upgrade\"><a class=\"anchor\" href=\"#upgrade\">#</a> Upgrade</h2>\n<p># on master node</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl stop slurmdbd.service</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ systemctl stop slurmctld.service</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ systemctl stop slurmd.service</pre></td></tr></table></figure><p># on slave node</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl stop slurmd.service</pre></td></tr></table></figure><p># on master node, make backup of database and old config files</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ mysqldump <span class=\"token parameter variable\">-p</span> <span class=\"token parameter variable\">--databases</span> slurm_acct_db <span class=\"token operator\">></span> backup.sql <span class=\"token punctuation\">(</span>path: /root<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">mkdir</span> old_slurm</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ <span class=\"token function\">cp</span> <span class=\"token parameter variable\">-r</span> /etc/slurm/* /root/old_slurm</pre></td></tr></table></figure><p># all nodes upgrade</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># conda deactivate, clean environment</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># echo $LD_LIBRARY_PATH [*]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># unset LD_LIBRARY_PATH [*]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># export PATH=/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/usr/local/bin:/root/bin [*]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># yum --disablerepo='*' localinstall libaec-1.0.4-1.el7.x86_64.rpm libaec-devel-1.0.4-1.el7.x86_64.rpm hdf5-devel-1.8.12-12.el7.x86_64.rpm hdf5-1.8.12-12.el7.x86_64.rpm </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$ rpmbuild <span class=\"token parameter variable\">-ta</span> slurm-*.tar.bz2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>$ <span class=\"token function\">rpm</span> <span class=\"token parameter variable\">--upgrade</span> *.rpm <span class=\"token comment\"># for downgrade, use \"rpm -Uvh --oldpackage *.rpm\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>$ yum <span class=\"token parameter variable\">--disablerepo</span><span class=\"token operator\">=</span><span class=\"token string\">'*'</span> list slurm</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># \"[*]\" maybe necessary</span></pre></td></tr></table></figure><h2 id=\"pam\"><a class=\"anchor\" href=\"#pam\">#</a> Pam</h2>\n<ol>\n<li>Config1</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">vim</span> /etc/slurm/slurm.conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#TaskPlugin=task/affinity</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">TaskPlugin</span><span class=\"token operator\">=</span>task/cgroup</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">PrologFlags</span><span class=\"token operator\">=</span>contain</pre></td></tr></table></figure><ol start=\"2\">\n<li>Config2</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">vim</span> /etc/pam.d/sshd</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>account    sufficient    pam_listfile.so <span class=\"token assign-left variable\">item</span><span class=\"token operator\">=</span>user <span class=\"token assign-left variable\">sense</span><span class=\"token operator\">=</span>allow <span class=\"token assign-left variable\">onerr</span><span class=\"token operator\">=</span>fail <span class=\"token assign-left variable\">file</span><span class=\"token operator\">=</span>/etc/ssh/slurm_allowed_users</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token parameter variable\">-account</span>    required      pam_slurm_adopt.so</pre></td></tr></table></figure><ol start=\"3\">\n<li>Config3</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">vim</span> /etc/pam.d/password-auth</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#account    sufficient    pam_localuser.so</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#-session   optional      pam_systemd.so</span></pre></td></tr></table></figure><p># scp from master node to slave nodes</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">scp</span> /etc/slurm/slurm.conf nodeXX:/etc/slurm/</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">scp</span> /etc/pam.d/sshd nodeXX:/etc/pam.d/</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">scp</span> /etc/pam.d/password-auth nodeXX:/etc/pam.d/password-auth</pre></td></tr></table></figure><ol start=\"4\">\n<li>Restart</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl restart sshd.service</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zbHVybS5zY2hlZG1kLmNvbS9hcmNoaXZlL3NsdXJtLTIwLjAyLjcvcGFtX3NsdXJtX2Fkb3B0Lmh0bWw=\">Reference2</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMxOTEwNjEzL2FydGljbGUvZGV0YWlscy8xMDMzMzg3NTg=\">Reference3</span></p>\n<hr />\n<h2 id=\"issues\"><a class=\"anchor\" href=\"#issues\">#</a> Issues</h2>\n<p>⚠️ <strong>Error</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Failed to start MUNGE authentication service.</pre></td></tr></table></figure><p>🔧 <strong>Solution</strong></p>\n<ol>\n<li>Check time sync status</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl stop ntpd.service</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ ntpd <span class=\"token parameter variable\">-gq</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ systemctl start ntpd.service</pre></td></tr></table></figure><ol start=\"2\">\n<li>Check munge folder</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># check if /var/run/munge is missing</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">mkdir</span> /var/run/munge</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">chown</span> <span class=\"token parameter variable\">-R</span> munge:munge /var/run/munge/</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ systemctl restart munge.service</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ systemctl restart slurmd.service</pre></td></tr></table></figure>",
            "tags": [
                "Server",
                "Maintenance",
                "Linux",
                "Slurm"
            ]
        },
        {
            "id": "https://www.xuwanxing.space/server/maintenance/Basic_commands/",
            "url": "https://www.xuwanxing.space/server/maintenance/Basic_commands/",
            "title": "Basic commands",
            "date_published": "2022-10-11T16:00:00.000Z",
            "content_html": "<h2 id=\"check-hardware-info\"><a class=\"anchor\" href=\"#check-hardware-info\">#</a> Check hardware info</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">cat</span> /etc/centos-release  <span class=\"token comment\"># version</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ lspci <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-i</span> nvidia  <span class=\"token comment\"># gpu</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">uname</span> <span class=\"token parameter variable\">-a</span>  <span class=\"token comment\"># kernel</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ lshw <span class=\"token parameter variable\">-html</span> <span class=\"token operator\">></span> /hardware.html  <span class=\"token comment\"># print all info</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$ lscpu  <span class=\"token comment\"># cpu info</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/cpuinfo <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> name <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> <span class=\"token parameter variable\">-f2</span> -d: <span class=\"token operator\">|</span> <span class=\"token function\">uniq</span> <span class=\"token parameter variable\">-c</span>  <span class=\"token comment\"># cpu parameters</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/cpuinfo<span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"physical id\"</span><span class=\"token operator\">|</span> <span class=\"token function\">sort</span><span class=\"token operator\">|</span> <span class=\"token function\">uniq</span><span class=\"token operator\">|</span> <span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span>  <span class=\"token comment\"># physical cpus </span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/cpuinfo<span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"cpu cores\"</span><span class=\"token operator\">|</span> <span class=\"token function\">uniq</span>  <span class=\"token comment\"># no.cores</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/cpuinfo<span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"processor\"</span><span class=\"token operator\">|</span> <span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span>  <span class=\"token comment\"># virtual cpus</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/meminfo <span class=\"token operator\">|</span><span class=\"token function\">grep</span> MemTotal  <span class=\"token comment\"># memory</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>$ <span class=\"token function\">fdisk</span> <span class=\"token parameter variable\">-l</span> <span class=\"token operator\">|</span><span class=\"token function\">grep</span> Disk  <span class=\"token comment\"># disk info</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>$ lsscsi  <span class=\"token comment\"># SSD</span></pre></td></tr></table></figure><h2 id=\"switch-to-multi-user-mode\"><a class=\"anchor\" href=\"#switch-to-multi-user-mode\">#</a> Switch to multi-user mode</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl get-default <span class=\"token comment\"># graphical.target is useless</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ systemctl stop gdm.service</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ systemctl set-default multi-user.target</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93aWtpLmRlYmlhbi5vcmcvR0RNI3N5c3RlbWQ=\">Reference1</span></p>\n<h2 id=\"empty-the-buffers-and-cache\"><a class=\"anchor\" href=\"#empty-the-buffers-and-cache\">#</a> Empty the buffers and cache</h2>\n<p># To clear the swap:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ swapoff /dev/dm-1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">swapon</span> /dev/dm-1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">swapon</span> <span class=\"token parameter variable\">-s</span></pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy84NzkwOC9ob3ctZG8teW91LWVtcHR5LXRoZS1idWZmZXJzLWFuZC1jYWNoZS1vbi1hLWxpbnV4LXN5c3RlbQ==\">Reference2</span></p>\n<h2 id=\"yum\"><a class=\"anchor\" href=\"#yum\">#</a> Yum</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ yumdownloader packagename <span class=\"token comment\"># off-line install</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ yum <span class=\"token parameter variable\">--disablerepo</span><span class=\"token operator\">=</span><span class=\"token string\">'*'</span> <span class=\"token function\">install</span> rpm-package</pre></td></tr></table></figure><h2 id=\"file-operation\"><a class=\"anchor\" href=\"#file-operation\">#</a> File operation</h2>\n<p># Permission</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">chmod</span> <span class=\"token parameter variable\">-R</span> <span class=\"token number\">700</span> ./file</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">chown</span> <span class=\"token parameter variable\">-R</span> user:group ./file</pre></td></tr></table></figure><p># Move</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># copy all the files including hidden files</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">cp</span> <span class=\"token parameter variable\">-a</span> /old/. /folder/</pre></td></tr></table></figure><p># Download</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># background, continue, input, output</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">wget</span> <span class=\"token parameter variable\">-bc</span> <span class=\"token parameter variable\">-i</span> url.list <span class=\"token parameter variable\">-o</span> log.txt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># advanced options: -r recursive //-np no-parent //-4 connect only to IPv4 addresses.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># write output to a file named as the remote file</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$ <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-O</span> http://file</pre></td></tr></table></figure><p># compress &amp; uncompress</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">tar</span> <span class=\"token parameter variable\">-zxvf</span> <span class=\"token function\">file</span> <span class=\"token parameter variable\">-C</span> /dir <span class=\"token comment\"># -C uncompress to directory //-z for gzip //-j for bzip</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">unzip</span> <span class=\"token function\">file</span> <span class=\"token parameter variable\">-d</span> ./dir <span class=\"token comment\"># -d uncompress to directory</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ <span class=\"token function\">tar</span> <span class=\"token parameter variable\">-cfz</span> archive.tar.gz file1 file2 file3</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ <span class=\"token function\">tar</span> <span class=\"token parameter variable\">-czPf</span> archive.tar.gz /file_dir <span class=\"token parameter variable\">-C</span> /outdir  <span class=\"token comment\"># -P don't strip leading `/'s from file names</span></pre></td></tr></table></figure><h2 id=\"sync-time\"><a class=\"anchor\" href=\"#sync-time\">#</a> Sync time</h2>\n<p># on master node</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">date</span> <span class=\"token parameter variable\">-s</span> <span class=\"token string\">\"2021-11-22 13:15:43\"</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ clock <span class=\"token parameter variable\">-w</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ systemctl restart ntpd.service</pre></td></tr></table></figure><p># wait for a while</p>\n<p># on slave node</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl stop ntpd.service</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ ntpd <span class=\"token parameter variable\">-gq</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ systemctl start ntpd.service</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cDovL2trLmJpZ2VyLm1lL3RpbWUucGhw\">Reference3</span></p>\n<h2 id=\"sudo\"><a class=\"anchor\" href=\"#sudo\">#</a> Sudo</h2>\n<p># add a sudoer</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>username       <span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span>      /usr/sbin/*,/sbin/*,/usr/bin/*,<span class=\"token operator\">!</span>/usr/bin/passwd,<span class=\"token operator\">!</span>/usr/sbin/visudo,<span class=\"token operator\">!</span>/usr/sbin/useradd,<span class=\"token operator\">!</span>/usr/sbin/userdel,<span class=\"token operator\">!</span>/usr/sbin/reboot,<span class=\"token operator\">!</span>/usr/sbin/poweroff,<span class=\"token operator\">!</span>/usr/sbin/shutdown</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2VsaXphYmV0aHh4eS9hcnRpY2xlL2RldGFpbHMvMTA4NjgyODkz\">Reference4</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93ZW5rdS5iYWlkdS5jb20vdmlldy8xYzFiYTAwNWJmZDEyNmZmZjcwNWNjMTc1NTI3MDcyMjE5MmU1OWVhLmh0bWw=\">Reference5</span></p>\n<h2 id=\"history\"><a class=\"anchor\" href=\"#history\">#</a> History</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'HISTTIMEFORMAT=\"%F %T \"'</span> <span class=\"token operator\">>></span> /etc/profile</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token builtin class-name\">source</span> /etc/profile</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC85OTgxODY2NA==\">Reference6</span></p>\n<h2 id=\"backup\"><a class=\"anchor\" href=\"#backup\">#</a> Backup</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-zvh</span> backup.tar /tmp/backups/ <span class=\"token comment\"># cp file</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-avzh</span> /root/rpmpkgs /tmp/backups/ <span class=\"token comment\"># cp dir</span></pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20va2VsYW1veXVqdXpoZW4vcC8xMDA4OTQ1NC5odG1s\">Reference7</span></p>\n",
            "tags": [
                "Server",
                "Maintenance",
                "Linux"
            ]
        },
        {
            "id": "https://www.xuwanxing.space/project/My_first_post/",
            "url": "https://www.xuwanxing.space/project/My_first_post/",
            "title": "My first post",
            "date_published": "2022-10-10T16:00:00.000Z",
            "content_html": "<p>This is a post about <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvLw==\">Hexo</span>. Check <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv\">documentation</span> for more info.</p>\n<h2 id=\"quick-start\"><a class=\"anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"create-a-new-post\"><a class=\"anchor\" href=\"#create-a-new-post\">#</a> Create a new post</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo new <span class=\"token string\">\"My New Post\"</span></pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s\">Writing</span></p>\n<h3 id=\"run-server\"><a class=\"anchor\" href=\"#run-server\">#</a> Run server</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo server</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=\">Server</span></p>\n<h3 id=\"generate-static-files\"><a class=\"anchor\" href=\"#generate-static-files\">#</a> Generate static files</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo generate</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s\">Generating</span></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"anchor\" href=\"#deploy-to-remote-sites\">#</a> Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo deploy</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s\">Deployment</span></p>\n",
            "tags": [
                "Project",
                "Hexo"
            ]
        }
    ]
}