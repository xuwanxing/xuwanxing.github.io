{
    "version": "https://jsonfeed.org/version/1",
    "title": "Starlike",
    "subtitle": "",
    "icon": "https://www.xuwanxing.space/images/favicon.ico",
    "description": "Take some notes.",
    "home_page_url": "https://www.xuwanxing.space",
    "items": [
        {
            "id": "https://www.xuwanxing.space/server/maintenance/Maintenance/",
            "url": "https://www.xuwanxing.space/server/maintenance/Maintenance/",
            "title": "Maintenance",
            "date_published": "2022-10-11T16:00:00.000Z",
            "content_html": "<p>Is it hard to maintain a server? Practice makes perfect.</p>\n<h2 id=\"maintenance\"><a class=\"anchor\" href=\"#maintenance\">#</a> Maintenance</h2>\n<h3 id=\"check-hardware-info\"><a class=\"anchor\" href=\"#check-hardware-info\">#</a> Check hardware info</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">cat</span> /etc/centos-release  <span class=\"token comment\"># version</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ lspci <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-i</span> nvidia  <span class=\"token comment\"># gpu</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">uname</span> <span class=\"token parameter variable\">-a</span>  <span class=\"token comment\"># kernel</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ lshw <span class=\"token parameter variable\">-html</span> <span class=\"token operator\">></span> /hardware.html  <span class=\"token comment\"># print all info</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$ lscpu  <span class=\"token comment\"># cpu info</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/cpuinfo <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> name <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> <span class=\"token parameter variable\">-f2</span> -d: <span class=\"token operator\">|</span> <span class=\"token function\">uniq</span> <span class=\"token parameter variable\">-c</span>  <span class=\"token comment\"># cpu parameters</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/cpuinfo<span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"physical id\"</span><span class=\"token operator\">|</span> <span class=\"token function\">sort</span><span class=\"token operator\">|</span> <span class=\"token function\">uniq</span><span class=\"token operator\">|</span> <span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span>  <span class=\"token comment\"># physical cpus </span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/cpuinfo<span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"cpu cores\"</span><span class=\"token operator\">|</span> <span class=\"token function\">uniq</span>  <span class=\"token comment\"># no.cores</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/cpuinfo<span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"processor\"</span><span class=\"token operator\">|</span> <span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span>  <span class=\"token comment\"># virtual cpus</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>$ <span class=\"token function\">cat</span> /proc/meminfo <span class=\"token operator\">|</span><span class=\"token function\">grep</span> MemTotal  <span class=\"token comment\"># memory</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>$ <span class=\"token function\">fdisk</span> <span class=\"token parameter variable\">-l</span> <span class=\"token operator\">|</span><span class=\"token function\">grep</span> Disk  <span class=\"token comment\"># disk info</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>$ lsscsi  <span class=\"token comment\"># SSD</span></pre></td></tr></table></figure><h3 id=\"switch-to-multi-user-mode\"><a class=\"anchor\" href=\"#switch-to-multi-user-mode\">#</a> Switch to multi-user mode</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl get-default <span class=\"token comment\"># graphical.target is useless</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ systemctl stop gdm.service</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ systemctl set-default multi-user.target</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93aWtpLmRlYmlhbi5vcmcvR0RNI3N5c3RlbWQ=\">Reference1</span></p>\n<h3 id=\"empty-the-buffers-and-cache\"><a class=\"anchor\" href=\"#empty-the-buffers-and-cache\">#</a> Empty the buffers and cache</h3>\n<p># To clear the swap:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ swapoff /dev/dm-1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">swapon</span> /dev/dm-1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ <span class=\"token function\">swapon</span> <span class=\"token parameter variable\">-s</span></pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy84NzkwOC9ob3ctZG8teW91LWVtcHR5LXRoZS1idWZmZXJzLWFuZC1jYWNoZS1vbi1hLWxpbnV4LXN5c3RlbQ==\">Reference2</span></p>\n<h3 id=\"yum\"><a class=\"anchor\" href=\"#yum\">#</a> Yum</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ yumdownloader packagename <span class=\"token comment\"># off-line install</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ yum <span class=\"token parameter variable\">--disablerepo</span><span class=\"token operator\">=</span><span class=\"token string\">'*'</span> <span class=\"token function\">install</span> rpm-package</pre></td></tr></table></figure><h3 id=\"file-operation\"><a class=\"anchor\" href=\"#file-operation\">#</a> File operation</h3>\n<p># Permission</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">chmod</span> <span class=\"token parameter variable\">-R</span> <span class=\"token number\">700</span> ./file</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">chown</span> <span class=\"token parameter variable\">-R</span> user:group ./file</pre></td></tr></table></figure><p># Move</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># copy all the files including hidden files</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">cp</span> <span class=\"token parameter variable\">-a</span> /old/. /folder/</pre></td></tr></table></figure><p># Download</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># background, continue, input, output</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">wget</span> <span class=\"token parameter variable\">-bc</span> <span class=\"token parameter variable\">-i</span> url.list <span class=\"token parameter variable\">-o</span> log.txt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># advanced options: -r recursive //-np no-parent //-4 connect only to IPv4 addresses.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># write output to a file named as the remote file</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$ <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-O</span> http://file</pre></td></tr></table></figure><p># compress &amp; uncompress</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">tar</span> <span class=\"token parameter variable\">-zxvf</span> <span class=\"token function\">file</span> <span class=\"token parameter variable\">-C</span> /dir <span class=\"token comment\"># -C uncompress to directory //-z for gzip //-j for bzip</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">unzip</span> <span class=\"token function\">file</span> <span class=\"token parameter variable\">-d</span> ./dir <span class=\"token comment\"># -d uncompress to directory</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ <span class=\"token function\">tar</span> <span class=\"token parameter variable\">-cfz</span> archive.tar.gz file1 file2 file3</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ <span class=\"token function\">tar</span> <span class=\"token parameter variable\">-czPf</span> archive.tar.gz /file_dir <span class=\"token parameter variable\">-C</span> /outdir  <span class=\"token comment\"># -P don't strip leading `/'s from file names</span></pre></td></tr></table></figure><h3 id=\"sync-time\"><a class=\"anchor\" href=\"#sync-time\">#</a> Sync time</h3>\n<p># on master node</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">date</span> <span class=\"token parameter variable\">-s</span> <span class=\"token string\">\"2021-11-22 13:15:43\"</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ clock <span class=\"token parameter variable\">-w</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ systemctl restart ntpd.service</pre></td></tr></table></figure><p># wait for a while</p>\n<p># on slave node</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ systemctl stop ntpd.service</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ ntpd <span class=\"token parameter variable\">-gq</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ systemctl start ntpd.service</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cDovL2trLmJpZ2VyLm1lL3RpbWUucGhw\">Reference3</span></p>\n<h3 id=\"sudo\"><a class=\"anchor\" href=\"#sudo\">#</a> Sudo</h3>\n<p># add a sudoer</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>username       <span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span>      /usr/sbin/*,/sbin/*,/usr/bin/*,<span class=\"token operator\">!</span>/usr/bin/passwd,<span class=\"token operator\">!</span>/usr/sbin/visudo,<span class=\"token operator\">!</span>/usr/sbin/useradd,<span class=\"token operator\">!</span>/usr/sbin/userdel,<span class=\"token operator\">!</span>/usr/sbin/reboot,<span class=\"token operator\">!</span>/usr/sbin/poweroff,<span class=\"token operator\">!</span>/usr/sbin/shutdown</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2VsaXphYmV0aHh4eS9hcnRpY2xlL2RldGFpbHMvMTA4NjgyODkz\">Reference4</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93ZW5rdS5iYWlkdS5jb20vdmlldy8xYzFiYTAwNWJmZDEyNmZmZjcwNWNjMTc1NTI3MDcyMjE5MmU1OWVhLmh0bWw=\">Reference5</span></p>\n<h3 id=\"history\"><a class=\"anchor\" href=\"#history\">#</a> History</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'HISTTIMEFORMAT=\"%F %T \"'</span> <span class=\"token operator\">>></span> /etc/profile</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token builtin class-name\">source</span> /etc/profile</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC85OTgxODY2NA==\">Reference6</span></p>\n<h3 id=\"backup\"><a class=\"anchor\" href=\"#backup\">#</a> Backup</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-zvh</span> backup.tar /tmp/backups/ <span class=\"token comment\"># cp file</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-avzh</span> /root/rpmpkgs /tmp/backups/ <span class=\"token comment\"># cp dir</span></pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20va2VsYW1veXVqdXpoZW4vcC8xMDA4OTQ1NC5odG1s\">Reference7</span></p>\n",
            "tags": [
                "Server",
                "Maintenance",
                "Linux"
            ]
        },
        {
            "id": "https://www.xuwanxing.space/project/My_first_post/",
            "url": "https://www.xuwanxing.space/project/My_first_post/",
            "title": "My first post",
            "date_published": "2022-10-10T16:00:00.000Z",
            "content_html": "<p>This is a post about <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvLw==\">Hexo</span>. Check <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv\">documentation</span> for more info.</p>\n<h2 id=\"quick-start\"><a class=\"anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"create-a-new-post\"><a class=\"anchor\" href=\"#create-a-new-post\">#</a> Create a new post</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo new <span class=\"token string\">\"My New Post\"</span></pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s\">Writing</span></p>\n<h3 id=\"run-server\"><a class=\"anchor\" href=\"#run-server\">#</a> Run server</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo server</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=\">Server</span></p>\n<h3 id=\"generate-static-files\"><a class=\"anchor\" href=\"#generate-static-files\">#</a> Generate static files</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo generate</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s\">Generating</span></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"anchor\" href=\"#deploy-to-remote-sites\">#</a> Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo deploy</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s\">Deployment</span></p>\n",
            "tags": [
                "Project",
                "Hexo"
            ]
        }
    ]
}