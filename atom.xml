<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://www.xuwanxing.space</id>
    <title>Starlike</title>
    <subtitle></subtitle>
    <icon>https://www.xuwanxing.space/images/favicon.ico</icon>
    <link href="https://www.xuwanxing.space" />
    <author>
      <name>Wanxing Xu</name>
    </author>
    <updated>2022-10-11T16:00:00.000Z</updated>
    <entry>
        <id>https://www.xuwanxing.space/server/maintenance/Maintenance/</id>
        <title>Maintenance</title>
        <link rel="alternate" href="https://www.xuwanxing.space/server/maintenance/Maintenance/"/>
        <content type="html">&lt;p&gt;Is it hard to maintain a server? Practice makes perfect.&lt;/p&gt;
&lt;h2 id=&#34;Maintenance&#34;&gt;&lt;a href=&#34;#Maintenance&#34; class=&#34;headerlink&#34; title=&#34;Maintenance&#34;&gt;&lt;/a&gt;Maintenance&lt;/h2&gt;&lt;h3 id=&#34;Check-hardware-info&#34;&gt;&lt;a href=&#34;#Check-hardware-info&#34; class=&#34;headerlink&#34; title=&#34;Check hardware info&#34;&gt;&lt;/a&gt;Check hardware info&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ cat /etc/centos-release  # version
$ lspci | grep -i nvidia  # gpu
$ uname -a  # kernel

$ lshw -html &amp;gt; /hardware.html  # print all info
$ lscpu  # cpu info
$ cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c  # cpu parameters
$ cat /proc/cpuinfo| grep &amp;quot;physical id&amp;quot;| sort| uniq| wc -l  # physical cpus 
$ cat /proc/cpuinfo| grep &amp;quot;cpu cores&amp;quot;| uniq  # no.cores
$ cat /proc/cpuinfo| grep &amp;quot;processor&amp;quot;| wc -l  # virtual cpus
$ cat /proc/meminfo |grep MemTotal  # memory
$ fdisk -l |grep Disk  # disk info
$ lsscsi  # SSD
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;Switch-to-multi-user-mode&#34;&gt;&lt;a href=&#34;#Switch-to-multi-user-mode&#34; class=&#34;headerlink&#34; title=&#34;Switch to multi-user mode&#34;&gt;&lt;/a&gt;Switch to multi-user mode&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ systemctl get-default # graphical.target is useless

$ systemctl stop gdm.service
$ systemctl set-default multi-user.target
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmRlYmlhbi5vcmcvR0RNI3N5c3RlbWQ=&#34;&gt;Reference1&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;Empty-the-buffers-and-cache&#34;&gt;&lt;a href=&#34;#Empty-the-buffers-and-cache&#34; class=&#34;headerlink&#34; title=&#34;Empty the buffers and cache&#34;&gt;&lt;/a&gt;Empty the buffers and cache&lt;/h3&gt;&lt;p&gt;# To clear the swap:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ swapoff /dev/dm-1
$ swapon /dev/dm-1
$ swapon -s
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy84NzkwOC9ob3ctZG8teW91LWVtcHR5LXRoZS1idWZmZXJzLWFuZC1jYWNoZS1vbi1hLWxpbnV4LXN5c3RlbQ==&#34;&gt;Reference2&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;Yum&#34;&gt;&lt;a href=&#34;#Yum&#34; class=&#34;headerlink&#34; title=&#34;Yum&#34;&gt;&lt;/a&gt;Yum&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ yumdownloader packagename # off-line install
$ yum --disablerepo=&amp;#39;*&amp;#39; install rpm-package 
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;File-operation&#34;&gt;&lt;a href=&#34;#File-operation&#34; class=&#34;headerlink&#34; title=&#34;File operation&#34;&gt;&lt;/a&gt;File operation&lt;/h3&gt;&lt;p&gt;# Permission&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ chmod -R 700 ./file
$ chown -R user:group ./file
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;# Move&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;# copy all the files including hidden files
$ cp -a /old/. /folder/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;# Download&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;# background, continue, input, output
$ wget -bc -i url.list -o log.txt
# advanced options: -r recursive //-np no-parent //-4 connect only to IPv4 addresses.

# write output to a file named as the remote file
$ curl -O http://file
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;# compress &amp;amp; uncompress&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ tar -zxvf file -C /dir # -C uncompress to directory //-z for gzip //-j for bzip
$ unzip file -d ./dir # -d uncompress to directory

$ tar -cfz archive.tar.gz file1 file2 file3
$ tar -czPf archive.tar.gz /file_dir -C /outdir  # -P don&amp;#39;t strip leading `/&amp;#39;s from file names
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;Sync-time&#34;&gt;&lt;a href=&#34;#Sync-time&#34; class=&#34;headerlink&#34; title=&#34;Sync time&#34;&gt;&lt;/a&gt;Sync time&lt;/h3&gt;&lt;p&gt;# on master node&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ date -s &amp;quot;2021-11-22 13:15:43&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ clock -w
$ systemctl restart ntpd.service
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;# wait for a while&lt;/p&gt;
&lt;p&gt;# on slave node&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ systemctl stop ntpd.service
$ ntpd -gq
$ systemctl start ntpd.service
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL2trLmJpZ2VyLm1lL3RpbWUucGhw&#34;&gt;Reference3&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;Sudo&#34;&gt;&lt;a href=&#34;#Sudo&#34; class=&#34;headerlink&#34; title=&#34;Sudo&#34;&gt;&lt;/a&gt;Sudo&lt;/h3&gt;&lt;p&gt;# add a sudoer&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;username       ALL=(root)      /usr/sbin/*,/sbin/*,/usr/bin/*,!/usr/bin/passwd,!/usr/sbin/visudo,!/usr/sbin/useradd,!/usr/sbin/userdel,!/usr/sbin/reboot,!/usr/sbin/poweroff,!/usr/sbin/shutdown
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2VsaXphYmV0aHh4eS9hcnRpY2xlL2RldGFpbHMvMTA4NjgyODkz&#34;&gt;Reference4&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93ZW5rdS5iYWlkdS5jb20vdmlldy8xYzFiYTAwNWJmZDEyNmZmZjcwNWNjMTc1NTI3MDcyMjE5MmU1OWVhLmh0bWw=&#34;&gt;Reference5&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;History&#34;&gt;&lt;a href=&#34;#History&#34; class=&#34;headerlink&#34; title=&#34;History&#34;&gt;&lt;/a&gt;History&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ echo &amp;#39;HISTTIMEFORMAT=&amp;quot;%F %T &amp;quot;&amp;#39; &amp;gt;&amp;gt; /etc/profile
$ source /etc/profile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC85OTgxODY2NA==&#34;&gt;Reference6&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;Backup&#34;&gt;&lt;a href=&#34;#Backup&#34; class=&#34;headerlink&#34; title=&#34;Backup&#34;&gt;&lt;/a&gt;Backup&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ rsync -zvh backup.tar /tmp/backups/ # cp file
$ rsync -avzh /root/rpmpkgs /tmp/backups/ # cp dir
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuY25ibG9ncy5jb20va2VsYW1veXVqdXpoZW4vcC8xMDA4OTQ1NC5odG1s&#34;&gt;Reference7&lt;/span&gt;&lt;/p&gt;
</content>
        <category term="Server" scheme="https://www.xuwanxing.space/categories/server/" />
        <category term="Maintenance" scheme="https://www.xuwanxing.space/categories/server/maintenance/" />
        <category term="Linux" scheme="https://www.xuwanxing.space/tags/Linux/" />
        <updated>2022-10-11T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>https://www.xuwanxing.space/project/My_first_post/</id>
        <title>My first post</title>
        <link rel="alternate" href="https://www.xuwanxing.space/project/My_first_post/"/>
        <content type="html">&lt;p&gt;This is a post about &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvLw==&#34;&gt;Hexo&lt;/span&gt;. Check &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv&#34;&gt;documentation&lt;/span&gt; for more info.&lt;/p&gt;
&lt;h2 id=&#34;Quick-Start&#34;&gt;&lt;a href=&#34;#Quick-Start&#34; class=&#34;headerlink&#34; title=&#34;Quick Start&#34;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&#34;Create-a-new-post&#34;&gt;&lt;a href=&#34;#Create-a-new-post&#34; class=&#34;headerlink&#34; title=&#34;Create a new post&#34;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ hexo new &amp;quot;My New Post&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s&#34;&gt;Writing&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;Run-server&#34;&gt;&lt;a href=&#34;#Run-server&#34; class=&#34;headerlink&#34; title=&#34;Run server&#34;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ hexo server
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=&#34;&gt;Server&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;Generate-static-files&#34;&gt;&lt;a href=&#34;#Generate-static-files&#34; class=&#34;headerlink&#34; title=&#34;Generate static files&#34;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ hexo generate
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s&#34;&gt;Generating&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;Deploy-to-remote-sites&#34;&gt;&lt;a href=&#34;#Deploy-to-remote-sites&#34; class=&#34;headerlink&#34; title=&#34;Deploy to remote sites&#34;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;bash&#34;&gt;$ hexo deploy
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s&#34;&gt;Deployment&lt;/span&gt;&lt;/p&gt;
</content>
        <category term="Project" scheme="https://www.xuwanxing.space/categories/project/" />
        <category term="Hexo" scheme="https://www.xuwanxing.space/tags/Hexo/" />
        <updated>2022-10-10T16:00:00.000Z</updated>
    </entry>
</feed>
